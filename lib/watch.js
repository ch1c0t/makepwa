// Generated by CoffeeScript 2.5.1
(function() {
  var BS, build, buildDeps, buildIcons, buildMainScript, buildManifest, buildPages, buildSWRegistration, buildStyles, buildWorkers, chokidar, watching;

  chokidar = require('chokidar');

  BS = require('browser-sync');

  ({build, buildPages, buildStyles, buildDeps, buildMainScript, buildSWRegistration, buildWorkers, buildIcons, buildManifest} = require('./build'));

  exports.watch = function() {
    var bs;
    build();
    watching(['src/pages/*.pug'], buildPages);
    watching(['src/styles/*.sass'], buildStyles);
    watching(['src/deps.yml'], buildDeps);
    watching(['src/scripts/**/*.coffee', 'src/scripts/**/*.js'], buildMainScript);
    watching(['src/scripts/register_sw.coffee'], buildSWRegistration);
    watching(['src/workers/**/*.coffee', 'src/scripts/**/*.js'], buildWorkers);
    watching(['src/icons/icon.svg'], buildIcons);
    watching(['src/manifest.yml'], buildManifest);
    bs = BS.create();
    return bs.init({
      server: DIST,
      files: `${DIST}/**/*`,
      open: false,
      ui: false,
      notify: false
    });
  };

  watching = function(array, fn) {
    var watcher;
    watcher = chokidar.watch(array, {
      persistent: true,
      ignoreInitial: true
    });
    return watcher.on('all', function(event, path) {
      console.log(event, path);
      return fn();
    });
  };

}).call(this);
