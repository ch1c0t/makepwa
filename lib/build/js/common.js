// Generated by CoffeeScript 2.5.1
(function() {
  var path, webpack;

  path = require('path');

  webpack = require('webpack');

  exports.runWebpack = function({entry, output}) {
    var conf, dir, load_coffee, name;
    dir = path.dirname(output);
    name = path.basename(output);
    load_coffee = {
      test: /\.coffee$/,
      use: 'coffee-loader'
    };
    conf = {
      mode: 'production',
      entry: entry,
      output: {
        path: dir,
        filename: name
      },
      module: {
        rules: [load_coffee]
      }
    };
    return new Promise(function(resolve, reject) {
      return webpack(conf, function(error, stats) {
        var info;
        if (error) {
          console.error(error.stack || error);
          if (error.details) {
            console.error(error.details);
          }
          reject();
        }
        info = stats.toJson();
        if (stats.hasWarnings()) {
          console.warn(info.warnings);
        }
        if (stats.hasErrors()) {
          console.error(info.errors);
          return reject();
        } else {
          return resolve();
        }
      });
    });
  };

}).call(this);
